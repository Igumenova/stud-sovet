const _id=document.querySelector(".order").dataset.id,title=document.querySelector(".order__title"),customer=document.querySelector(".order__customer"),customerII=document.querySelector(".order__customerII"),customerIII=document.querySelector(".order__customerII"),textarea=document.querySelector("#command_comment"),addEditEvent=t=>{const e=t.querySelector(".order__content"),r=t.querySelector(".order__edit"),o=t.dataset.key;let n=e.textContent;const c=t=>{if(t.target.textContent!==n){n=t.target.textContent;let e={_id:_id};e[o]=n,fetch(`${host}/admin/commands`,{headers:{"Content-type":"application/json;charset=utf-8"},method:"PUT",body:JSON.stringify(e)}).then(t=>{200!==t.status&&alert(`Изменения не сохранились. Код ошибки: ${t.status}`)}).catch(t=>alert(`Ошибка запроса3. ${t.message}`))}e.removeEventListener("blur",c)};r.addEventListener("click",()=>{e.contentEditable=!0,e.addEventListener("blur",c),e.focus()})};for(const t of[title,customer,customerII,customerIII])addEditEvent(t);textarea.addEventListener("change",()=>{fetch(`${host}/admin/commands`,{headers:{"Content-type":"application/json;charset=utf-8"},method:"PUT",body:JSON.stringify({_id:_id,comment:textarea.value})}).then(t=>{200!==t.status&&alert(`Изменения не сохранились. Код ошибки: ${t.status}`)}).catch(t=>alert(`Ошибка запроса4. ${t.message}`))});